<!doctype html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>لوحة تحكم رضا العملاء</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <header>
    <h1>تحليل رضا وشكاوى العملاء (عربي)</h1>
  </header>

  <main>
    <section id="dashboard">
      <h2>لوحة التحكّم</h2>
      
      <!-- Stats Cards -->
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1.5rem; border-radius: 10px; text-align: center;">
          <div style="font-size: 0.9rem; opacity: 0.9;">دقة النموذج</div>
          <div id="accuracyStat" style="font-size: 2.5rem; font-weight: bold; margin: 0.5rem 0;">--%</div>
          <div style="font-size: 0.8rem; opacity: 0.8;">Model Accuracy</div>
        </div>
        <div style="background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%); color: #1a5f4a; padding: 1.5rem; border-radius: 10px; text-align: center;">
          <div style="font-size: 0.9rem;">إجمالي البيانات</div>
          <div id="totalStat" style="font-size: 2.5rem; font-weight: bold; margin: 0.5rem 0;">--</div>
          <div style="font-size: 0.8rem; opacity: 0.8;">Total Data Points</div>
        </div>
      </div>

      <!-- Charts Grid -->
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
        <div style="background: white; padding: 1rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
          <h3 style="margin-bottom: 1rem; font-size: 1.1rem; text-align: center;">توزيع التصنيفات</h3>
          <canvas id="pieChart"></canvas>
        </div>
        <div style="background: white; padding: 1rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
          <h3 style="margin-bottom: 1rem; font-size: 1.1rem; text-align: center;">مقارنة الفئات</h3>
          <canvas id="barChart"></canvas>
        </div>
      </div>

      <div id="stats"></div>
      <div style="margin-top:.5rem">
        <button id="refresh">تحديث الإحصاءات</button>
        <button id="retrainBtn">إعادة تدريب الموديل</button>
        <button id="showSubs">عرض الإرساليات المحفوظة</button>
      </div>
    </section>

    <section id="tester">
      <h2>اختبر نموذج التحليل</h2>
      <textarea id="textInput" placeholder="اكتب نصًا بالعربية هنا..." rows="5"></textarea>
      <div style="margin:.5rem 0">
        <label style="font-size:.95rem"><input type="checkbox" id="saveCheck" /> حفظ هذه الإرسال</label>
      </div>
      <button id="predictBtn">تحليل النص</button>
      <div id="prediction"></div>
    </section>

    <section id="submissionsSection" style="display:none">
      <h2>الإرساليات المحفوظة</h2>
      <div id="subsControls">
        <button id="refreshSubs">تحديث القائمة</button>
        <button id="deleteSelected">حذف المحدد</button>
        <button id="clearAll">مسح الكل</button>
        <button id="downloadCsv">تنزيل CSV</button>
        <button id="hideSubs">إخفاء</button>
      </div>
      <div id="subsTable" style="overflow:auto; max-height:400px; margin-top:.5rem"></div>
    </section>
  </main>

  <footer>
    <small>مشروع جاهز للتشغيل محليًا — اتبع ملف README للتشغيل.</small>
  </footer>

  <script src="/static/app.js"></script>
</body>

</html>